import json
import mysql.connector
liste = ["LI 209 (I)","LI 159 (I)","LI 346 (I)","LI 232 (I)","LI 230 (I)","LI 213 (I)","EE 204","ES 101 (K)","ES 103 (K)","LI 211 (I)","LI 239 (I)","LI 158 (I)","LI 234 (I)","B1-206c (B1)","LI 218 (I)","Amphi Daniel HUET (B1-J65) (B1)","ES 302 (K)","ES 003 (K)","Amphi Lignier (A)","ES 001 (K)","ES 201 (K)","ES 202 (K)","LI 204 (I)","S3 031","S3 032","Amphi S3 044","S3 256","S1 037","S3 259","S3 272","SD 038 (L)","SE 310 (L)","SD 054 (L)","Amphi Hippocrate","Amphi Hippocrate","Amphi Poincaré (N)","LI 347 (I)","ES S03 (K)","ES S02 (K)","ES S01 (K)","ES 002 (K)","SD 030 (L)","ES 203 (K)","PS3-012","SE 605 (L)","SE 309 (L)","Amphi D1 (E)","Amphi Chimie (A)","SE 407 (L)","ER 337","Amphi Jacquet (L)","LI 133 (I)","SE S20 (L)","Amphi D4 (E)","LI 371 (I)","ENS-213","Amphi Max Robba","SD 254 (L)","SD 227 (L)","PS1-065 - Informatique Niveau 1","PS3-049 - Informatique Niveau 3","PS0-084 - Informatique Niveau 0","PS2-091 - Informatique Niveau 2","Amphi Demolombe (D)","SE 508 (L)","Amphi DE BOUARD (B1-J01) (B1)","GEA-111","GEA 21 (B 102)","GEA INFO 13 (B 005)","GEA 22 (B 104)","GEA 10 (B 002)","DR 303 (D)","B1-230 (B1)","EG 057","IA 122","Amphi Marie Curie","Amphi 210","B1-101a (B1)","B1-239 (B1)","Amphi Mathématiques (A)","B1-202 (B1)","Amphi S3 043","Amphi Conté","Salle de formation 3ème BU Sciences","S3 415","GB201","ENS-004","GEII 2TDAV (IU 1038)","GEII 2TD1 (IU 1037)","GEII 2TD5 (IU 1016)","GEII 1PRO4","GEII 2TD2 (E 109)","LI 134 (I)","LI 130 (I)","LI 240 (I)","LI 157 (I)","LI 238 (I)","LI 132 (I)","LI 241 (I)","LI 233 (I)","","LI 128 (I)","Amphi 11","Amphi D3 (E)","ES 301 (K)","LI 222 (I)","SE 203 (L)","B1-206b (B1)","B1-223 (B1)","S1 218","S3 137","S3 023","S1 130","S3 271","S3 274","S3 124","S3 263","S3 254","S1 108","SE 303 (L)","SE 307 (L)","SE 609 (L)","ER 040-  Salle Polyvalente R","IU 108","ER 235","ER 212","P3","EE 207","Piscine municipale Rousseau","EE 103","BS 212","S1 205 (labo de langues)","S1 110","Salle 102 - TP Chimie analytique","PS1-081","PS3-051","B1-224 (B1)","SB S26 (N)","SA 016 (N)","Amphi Cauchy","DR S17 (D)","B1-137 (B1)","S1 010","B1-201 (B1)","DR 310 (D)","B1-118 (B1)","B1-117 (B1)","SD 035 (L)","S1 126","S1 122","S1 231","S3 160","S3 029","SB 207 (N)","S3 416","SD 230 (L)","Amphi Héron (D)","B 028","B 028","Salle informatique AC 103 (A)","Sortie de terrain","AC 129 (A)","AC 139 (A)","AC 138 (A)","HSE 024 - Hall Entreprise","Salle d'examen","GB301","GEA-027","E-CAMPUS","GEA-221","HSE 113 - Salle Info 2","0280","HSE 016 - Salle S0","1211","2235","GEA-237","IA 122","SA 008 (N)","Amphi Vauquelin (N)","Piscine Grand bassin - SUAPS (SUAPS)","S3 161","S3 273","Amphi Le Verrier","B1-245 (B1)","DR S16 (D)","SB 004 (N)","SD 114 (L)","SD 238 (L)","Amphi Rouelle (N)","A 028","Atelier Comp","Amphi 1","A 107","SD S55 (L)","SD 064 (L)","S3 401","DR 104 (D)","B1-206a (B1)","B1-152 (B1)","SB S24 (N)","B1-119 (B1)","S1 032","S3 260","S3 022","Amphi S3 045","SD 143 (L)","SD 162 (L)","HSE 008 - Amphithéâtre","HSE 112 - Salle S3","HSE 123 - Salle S1","HSE 122 - Salle S4","SE 212 (formation des personnels) (L)","SD 162 (L)","SE 211 (L)","SD 454 (L)","Amphi Jean VIAL (B1-J64) (B1)","B1-157c (B1)","DR S03 - Salle Mercure (D)","AC 010 (A)","Salle informatique AC 137 (A)","FIM Cherbourg","FIM St Lô","CCI Evreux","BRED - JOINVILLE-LE-PONT","IRTS","TC13 (ABC)","EG 059","IA 118","Salle Jean René PUTS","IA 102","S1 128","S3 335","S3 417","S3 409","S3 138","S3 403","PS1-084","Amphi Fresnel (N)","Amphi Laplace (L)","SD 327 (L)","Amphi Frémont (A)","Amphi Frémont (A)","DR 371 (D)","IA 214","IA 125","IA 208","Amphi Marie de Clèves (VISSO)","GIM C3 (D 103)","GIM C4 (D 104)","Amphi D2 (E)","Amphi Oresme (D)","SA 011 (N)","SB 204 (N)","S3 278","S3 276","S3 279","S3 275","S1 031","S1 124","B1-157b (B1)","Amphi Grignard (L)","DR S46 (D)","Atelier CN FR","Atelier CN TO","Atelier Conv","S1 033","S1 209","S3 030","B 032","B 100","B 123","B 008","B 103","B 132","A 116","A 100","B 103","A 104","B 037","B 116","B 036","A 032","B 115","A 015","B 127","IA 215","A 014","B 015","B 020","B 021","B 007","B 021","Amphi 2","B 014","B 109","B 002","AC 126 (A)","AC 117 (A)","A 109","B 131","A 017","A 108","A 030","A 047","A 028","A 101","A 017","Fablab","A 051","A 103","B 132","Fablab","A 021","A 027","Fablab","Fablab","B 109","A 014","AMPHI ESIX","S1 207","SB 222 (N)","DE 021","DE 111","B 102","SD 017 (L)","B1-263a (B1)","LI 214 (I)","LI 228 (I)","ES 102 (K)","EG 060c","EG 060c","AMPHI UFR","TC 14 (C 004)","TC 39 (C 103)","TC 41 (C 105)","DR 304 (D)","SB 007 (N)","DR 268 (D)","S3 020","IA 216","SD S64 (L)","S1 011","S1 014","S1 112","S3 162","S3 136","SD 362 (L)","IU 023","Salle Yves Modéran (N)","S1 134","AC 123 (A)","P6","DR 269 (D)","DR 103 (D)","EE 117","EE 117","S2 405","CH008","EE 219","S2 410","306","12","S.Multimédia","Amphithéatre","EG 035","Amphi 9","SD 117 - Paul Héroult (L)","AMPHI CHARPAK","Amphi S3 049","S1 224","ENS-205","TC-204","UFR TD4","TC 51 (C 101)","TC 40 (C 104)","IUT AMPHI B","ESIX TL3 (G 05)","HSE 017 - Salle Multimédia","S1 016","IA 207","PS2-094","Amphi 206","PS2-095","S3 016","IA 201","Musculation UFR - Campus 2 (GY)","Amphi Varignon","Dojo UFR - Campus 2 (GY)","Gymnase - UFR2 - Campus 2 (GY)","UFR POLE LICENCES LP CGC","EG 103","IA 206","IA 217","SD 430 (L)","B1-157a (B1)","B1-240 (B1)","GEA-217","SC S36 - Salle Vénus (M)","2129","2124","1106","SD 235 (L)","AC 120 (A)","S1 127","LI 129 (I)","AC 119 (A)","S1 113","S3 122","GB11","S1 026","S3 255","Amphi S3 057","B1-203 (B1)","B1-136 (B1)","Amphi Tocqueville (T)","DR 102 (D)","DR 301 (D)","A2 002 - Amphi 2000 (K)","DR 407 (D)","303","309","S2 116","S2 104","SE 013 (L)","EG 034","DR S04 - Salle Neptune (D)","IA 124","DR 311 (D)","S1 225","S3 260","S3 124","S3 277","S3 123","EG 032","EG 042","AMPHI JOSETTE TRAVERT","EG 036","M4 004 (04)","S2 303","ES 303 (K)","SE 514 (L)","S2 006","S1 017","S2 008","306","S.Multimédia","Amphi 8","EE 206","ESIX REGULATION N°122","SD 240 (L)","TC-114","Amphi Dumont d'Urville (N)","S2 112","S1 036","EE 212","Salle Jo Tréhard (D)","AC 007 (A)","SC S07 (M)","LI 229 (I)","DE 112","Extérieur","S1 210","Amphithéâtre (ABC)","SD21 (ABC) (ABC)","DR 270 (D)","Amphi 10","EE 207","SB 005 (N)","Halle des sports (H)","Espace forme - SUAPS (SUAPS)","Grand gymnase - SUAPS (SUAPS)","BU 2 (G)","BU 3 (G)","PS1-080","TC28 (ABC)","B1-J41 (B1)","B1-144 (B1)","SE 504 (L)","SA 117 (N)","SB S27 (N)","B1-263b (B1)","DR S48 (D)","DR S44 (D)","DR S49 (D)","DR 267 (D)","B1-101c (B1)","B1-147 (B1)","SD 330 (L)","B1-263c (B1)","DR 272 (D)","DR 404 (D)","EE 014 - Salle du Conseil","P7","Salle de danse - SUAPS (SUAPS)","Danse UFR - Campus 2 (GY)","AC 104 (A)","DR S18 (D)","PS0-076","Amphi Max Robba","GB220","PS1-085","SD 240 (L)","SA  115a (N)","S3 159","SD 038 (L)","Amphi 500","SD 130 (L)","3259","1109","2127","2236","2237","Labo de langues","Laboratoire multimédia","1110","Salle d'examen","2123","HSE 115 - Salle Info 1","Musculation UFR - Campus 2 (GY)","S3 037 (salle d'examens)","Salle Horizon - SUAPS (SUAPS)","Terrain Synthétique Nord (H)","Gymnase - UFR1 - Campus 2 (GY)","Salle de tir - SUAPS (SUAPS)","EE 118","CH013","DE 113","SE S19 (L)","ENS-111","TE - 003","PS2-090","GB212","Salle 116 - TP Parasitologie","SD 014 (L)","SD 016 (L)","DE 110","Dojo UFR - Campus 2 (GY)","S2 306","B1-442 (B1)","21","24","ENB","S.Examen","22","AC 135 (A)","Salle 117 - TP Physiologie","Amphi Léon Walras","I6 005 - Grand gymnase - ESPE","P2","P1","PS2-096","S1 224","Salle 109 - TD Botanique / Pharmacognosie","Salle 109 - TD Botanique / Pharmacognosie","SD 138 (L)","S1 131","ESIX LABORATOIRE LANGUES","ESIX TD4 (G S10)","ESIX ESPACE MULTIMEDIA","ESIX TD3 (G S09)","UFR SALLE INFORMATIQUE","UFR TD2","GEII 2INFO3 (IU 1027)","TC 38 (C 102)","GIM B2 ESPACE MULTIMEDIA (D 002)","GEII 2INFO1 (IU 1023)","GEII 2INFO2 (IU 1025)","GEII 2TD3 (IU 1034)","DR 309 (D)","GEII 1PRO1 (E 014)","Salle Jacques Izard","EG 114","EG 104","405","204","UFR TD3","23","CH015","EE 220 - Salle Arts Plastiques","GEII 1ATM1","TC18 (ABC)","UFR BUREAU D'ETUDES (F S010)","SD31 (ABC) (ABC)","SD25 (ABC) (ABC)","SD24 (ABC) (ABC)","SD36 (ABC) (ABC)","GA Avant garde","PH005","310","300","14","Salle 113 - Salle de TD","ESIX TL1 (G 03)","ESIX BUREAU D'ETUDES","TC ETUDES CO 17 (C 007)","TC ETUDES CO 11 (C 001)","TC ETUDES CO 12 (C 002)","TC INFO 20 (C 010)","IUT AMPHI AMIOT (A 001)","IUT AMPHI C","SE 005 (L)","S2 401","GEA-107","GEA-203","G-CH-141","G-CH-211","GEA INFO 12 (B 004)","ER 321 - Salle audio-vidéo","TC12 (ABC)","TC14 (ABC)","S2 108","UFR TD2","ESIX SALLE DU CONSEIL","ESIX TD1 (G 01)","GIM C5 (D 105))","GEII 2ELN2 (IU 1030)","GIM B4 (D 004)","GIM B1 (D 001)","GIM B6 (D 006)","GIM C2 (D 102)","SALLE DE CONFERENCES CAMPUS CHERBOURG","SALLE DE VISIOCONFERENCE (IUT)","SE 210 (L)","DR 370 (D)","PS1-087","ER 208","GEA-011","DR 308 (D)","GEA-103","CH010","ER 207","TC01 - Salle d'examens (ABC)","SD 256 (L)","2","ENS-009","IA 207","IA 207","C 24 (ABCD)","C 23 (ABCD)","C 23 (ABCD)","IA 208","ENS-006","TC-106","TC-024","TC-110","EE 022","Salle 130 - TP Biochimie","PH205","PS3-048","PS2-092","GB127","ENS-107","GB310","Mur d'escalade Halle des sports (H)","Salle de combat - SUAPS (SUAPS)","S1 132","GIM C1 (D 101)","GIM A3 (D S01)","EG 107","EG 109","SD 354 (L)","AC 143a (A)","10","308","ER 209","S3 406","S3 417","Piste athlétisme N°2 (H)","Piste athlétisme N°1 (H)","Piste athlétisme N°2 (H)","S3 406","Salle 014 - TP Galénique","11","EE 023","S2 110","9","9","8","8","PS0-094","SB 203 (N)","EE 117","ER 308 - Salle informatique","EE 214","GB306","GB303","GB213","GB217","C 14 (ABCD)","GEII 1PRO2 (E 013)","SD S62 (L)","UFR POLE LICENCES MMN","S2 226","PS2-093","GEII 1ATM2","DR 373 (D)","Amphithéatre (ABCD)","1208","1207","Salle 105 - TD Chimie minérale","AC 011 (A)","UFR Salle Multimédia 2","G-CH-106","GB220a","Piscine Petit bassin - SUAPS (SUAPS)","S2 106","Salle polyvalente - SUAPS (SUAPS)","Piste athlétisme N°1 (H)","Terrain Synthétique Nord (H)","Espace forme - SUAPS (SUAPS)","Terrain Synthétique Sud (H)","Forêt de Grimbosq","SD 154 (L)","SC S37 - Salle Jupiter (M)","SC S06 (M)","Salle des profs","0281","ER 211","EP 020 - Salle polyvalente","Salle de simulation d'odontologie","Laboratoire d'odontologie","PS2-072","SD 338 (L)","GIM Hall technique (D S06)","GIM CONTROLES A (D 106)","Gymnase - UFR3","ER 205","EA 006 - Amphithêatre","GEA-015","GEA-207","ER 310 - Salle informatique","B1-101b (B1)","Forêt de Cerisy","GEA-115","ENS-202","GEA-119","ENS-013","ENS-219","GEA-221","SB 232 (N)","DR 372 (D)","DR 306 (D)","212","214","DR 101 (D)","SB 206 (N)","ESIX TP MECANIQUE","GEII 2TD4 (IU 1033)","TC INFO 19 (C 009)","LI 210 (I)","SD 435 (L)","E-CAMPUS","EA 009 - Salle de valorisation de la recherche","EP 020 - Salle polyvalente","EE 104 - Laboratoire SVT","ER 207","ER 205","ER 211","ER 227","IA 202","G-CH-141","G-CH-204","G-CH-112","G-CH-206","G-CH-225","CH014","Salle 134 - TP Chimie organique","Salle 131 - TD Chimie organique","ER 308 - Salle informatique","ER 313 - Laboratoire de langues","ER 321 - Salle audio-vidéo","ER 321 - Salle audio-vidéo","SG LABO LANGUES (A 002)","GEII LABO LANGUES","Salle des thèses et de visioconférence","TC-240","ER 311 - Salle informatique","EA 104 - Salle de musique","EE 103","EE 109 - Laboratoire SVT","EA 104 - Salle de musique","Amphi Marie Curie","PS3-053","PS3-052","GEA 25 (B 107)","GEA 11 (B 001)","Salle 131 - TD Chimie organique","GEA 14 (B 003)","CH006","ENS-002","1103","1206","S2 006","G-CH-205","Salle 027 - Cabinet de médecine expérimental","Salle 026 - Pharmacie expérimentale","GIM B3b","PH106","Salle de cours du gymnase (GY)","Musculation UFR - Campus 2 (GY)","Salle des Marchés","IA 209","IU 116","IU 031","IU 020","IU 030","IU 030","IU 120","IU 031","G-CH-111","I6 007 - Petit gymnase - ESPE","G-CH-222","TC-102","TC-130","ENS-102","AT004","ENS-103","PH207","PH105","P4","P4","P2","1105","G-CH-203","G-CH-138","G-CH-207","Salle 117 - TP Physiologie","GEA 24 (B 106)","HA 001","0287","3251","3142","3250","stade caen Nord (foot)","3146","3143","3258","3252","3147","G-CH-227","GB110","3140","SHUC","G-CH-219","PS1-082 - Salle TP Histologie","GB205","GB205","ENS-209","ENS-010","TC-028","ENS-101","S2 121","G-CH-112","IU 104","IU 104","IU 028","IU 112","IU 101","IU 101","IU 119","C 13 (ABCD)","GB124","GB102","EG 019","EG 108","Auditorium","Amphi 215","Amphi 215","Amphi 215","Amphi 215","Salle des thèses","Amphi 220","Amphi 220","PS0-079","PS0-079","PS2-083","PS2-083","PS2-083","2234","3141","PS0-081","PS0-077","PS0-083","PS1-074","PS1-087","PS2-096","PS2-090","PS1-086","PS1-074","PS2-083","PS1-062","PS3-041","PS1-061","PS1-083","PS1-073","PS1-072","PS2-083","PS2-068","PS3-011","PS2-090","PS2-070","PS2-070","PS3-041","PS3-032","PS3-050","PS3-040","PS2-089","Amphithéâtre C. F. Baclesse","IA 218","SE 204 (formation des personnels) (L)","GEA-023","GB316","GB109","PH101","GB218","B1-J41 (B1)","ESIX TL2 (G 04)","Amphi 8","Terrain Beach Volley (H)","LI 160 (I)","Amphi Pierre Daure (P)","Amphi Pierre Daure (P)","B1-401 (B1)","B1-263a (B1)","IA 202","Gymnase - UFR1 - Campus 2 (GY)","Salle 028 - Salle des Thèses","Amphi 10","DR 302 (D)","Salle Belvédère (D)","HSE 111 - Salle S2","Aula Magna (P)","C 03 (ABCD)","C 02 (ABCD)","C 02 (ABCD)","Terrain Beach Volley (H)","Terrain Beach Volley (H)","Piste athlétisme N°1 (H)","Terrain Beach Volley (H)","Terrain Beach Volley (H)","PS 1-044","PS 1-019","PS 1-019","IA 215","P3","P4","P7","P2","GB302","ESIX TD1 (G 01)","UFR TD1","2240"]
liste = list(set(liste))

cnx = mysql.connector.connect(
    host="193.203.168.101",
    user="u321335528_Infuseting",
    password="Zc7&HZ3J$R1>",
    database="u321335528_Infuseting"
)
cursor = cnx.cursor()
tuples = []
for i in liste:   
    dict = {}
    query = "SELECT adeRessources, location FROM cours WHERE LOCATION = %s;"
    values = (i,)
    cursor.execute(query, values)
    result = cursor.fetchall()
    for p in result:
        try:
            dict[p]+=1
        except:
            dict[p]=1
    valueBase = []
    if len(dict.keys()) != 0:
        
        for p in dict.keys():
            if dict[p] == dict[max(dict, key=dict.get)]:
                valueBase.append(p)
    if (len(valueBase) == 0 and len(dict.keys()) != 0) or len(valueBase) == 1:
        tuples.append(max(dict, key=dict.get)) 
    for p in valueBase:    
        query = "SELECT DISTINCT location FROM cours WHERE ADERESSOURCES = %s;"
        values = (p[0],)
        cursor.execute(query, values)
        result = cursor.fetchall()
        if len(result) == 1:
            print(p)
            tuples.append(p)
            break   
            

json_data = []
for i, v in enumerate(tuples):
    json_data.append({
        "numUniv": 1,
        "nameSalle": v[1],
        "adeUniv": "https://ade.unicaen.fr/jsp/custom/modules/plannings/anonymous_cal.jsp",
        "adeResources": v[0],
        "adeProjectId": 1
    })

with open('prof.json', 'w', encoding="utf-8") as f:
    json.dump(json_data, f, ensure_ascii=False, encoding='utf8')
#{
#    "numUniv": 1,
#    "nameSalle": "Salles Reseau 2123",
#    "adeUniv": "https://ade.unicaen.fr/jsp/custom/modules/plannings/anonymous_cal.jsp",
#    
#    "adeResources": "39568",
#    "adeProjectId": 1
#        
#},
#{
#    "numUniv": 1,
#    "nameSalle": "Salles Reseau 2125",
#    "adeUniv": "https://ade.unicaen.fr/jsp/custom/modules/plannings/anonymous_cal.jsp",
#    
#    "adeResources": 39646,
#    "adeProjectId": 1
#        
#}
